{% extends "layout.html" %}

{% block title %}Course Profile | Shiksha Sathi{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto bg-white shadow rounded p-6">
  <h1 class="text-2xl font-semibold mb-6">Course Profile</h1>

  <form action="/course/update/{{ course._id }}" method="post" class="grid grid-cols-2 gap-4">

    <!-- Course Name -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Course Name *</label>
      <input type="text" name="name" value="{{ course.name }}" class="mt-1 block w-full border px-3 py-2 rounded" required>
    </div>

    <!-- Course Type -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Course Type *</label>
      <input type="text" name="course_type" value="{{ course.type }}" class="mt-1 block w-full border px-3 py-2 rounded" required>
    </div>
    <!-- Faculty Selection -->
<div class="col-span-2">
  <label class="text-sm font-medium text-gray-700">Assign Faculties *</label>
  <div class="mt-2 space-y-2">
    {% for f in faculties %}
      <label class="flex items-center space-x-2">
        <input type="checkbox" name="assigned_faculty" value="{{ f._id }}"
               class="rounded border-gray-300"
               {% if f._id in course.assigned_faculty %}checked{% endif %}>
        <span>{{ f.name }}</span>
      </label>
    {% endfor %}
  </div>
  <p class="text-xs text-gray-500">Select one or more faculties</p>
</div>



    <!-- Duration -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Duration *</label>
      <input type="text" name="duration" value="{{ course.duration }}" class="mt-1 block w-full border px-3 py-2 rounded" required>
    </div>

    <!-- Fee -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Fee *</label>
      <input type="number" name="fees" value="{{ course.fee }}" class="mt-1 block w-full border px-3 py-2 rounded" required>
    </div>

    <!-- Monthly Installments -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Monthly Installments</label>
      <input type="number" name="monthly_installments" value="{{ course.monthly_installments }}" class="mt-1 block w-full border px-3 py-2 rounded">
    </div>

    <!-- Max Students -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Max Students</label>
      <input type="number" name="max_students" value="{{ course.max_students }}" class="mt-1 block w-full border px-3 py-2 rounded">
    </div>

    <!-- Start Date -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Start Date *</label>
      <input type="date" name="start_date" value="{{ course.start_date }}" class="mt-1 block w-full border px-3 py-2 rounded" required>
    </div>

    <!-- Schedule Time -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Schedule Time</label>
      <input type="text" name="schedule_time" value="{{ course.schedule_time }}" class="mt-1 block w-full border px-3 py-2 rounded">
    </div>

    <!-- Subjects -->
    <div class="col-span-2">
      <label class="block text-sm font-medium text-gray-700">Subjects *</label>
      <input type="text" name="subjects" value="{{ course.subjects | join(', ') }}" class="mt-1 block w-full border px-3 py-2 rounded" required>
      <p class="text-xs text-gray-500 mt-1">Separate multiple subjects with commas</p>
    </div>

    <!-- Description -->
    <div class="col-span-2">
      <label class="block text-sm font-medium text-gray-700">Description</label>
      <textarea name="description" class="mt-1 block w-full border px-3 py-2 rounded">{{ course.description }}</textarea>
    </div>

    <!-- Status -->
    <div class="col-span-1">
      <label class="block text-sm font-medium text-gray-700">Status</label>
      <select name="status" class="mt-1 block w-full border px-3 py-2 rounded">
        <option value="Active" {% if course.status == 'Active' %}selected{% endif %}>Active</option>
        <option value="Inactive" {% if course.status == 'Inactive' %}selected{% endif %}>Inactive</option>
      </select>
    </div>

    <!-- Buttons -->
    <div class="col-span-2 flex justify-end gap-4 mt-4">
      <a href="/course" class="bg-gray-200 text-gray-800 px-4 py-2 rounded">Cancel</a>
      <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded">Update Course</button>
    </div>

  </form>
</div>
{% endblock %}
